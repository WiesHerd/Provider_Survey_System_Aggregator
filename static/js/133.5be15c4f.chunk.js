"use strict";(self.webpackChunksurvey_data_processing_system=self.webpackChunksurvey_data_processing_system||[]).push([[133],{133:(e,a,s)=>{s.r(a),s.d(a,{AutoMapping:()=>ae,LearnedMappings:()=>P,MappedSpecialties:()=>_,MappedSpecialtyItem:()=>H,MappingHelp:()=>ie,SURVEY_SOURCE_COLORS:()=>g,SpecialtyCard:()=>I,SpecialtyMapping:()=>te,UnmappedSpecialties:()=>O,calculateAutoMappingResults:()=>v,calculateMappingStats:()=>A,filterLearnedMappings:()=>b,filterMappedSpecialties:()=>f,filterUnmappedSpecialties:()=>x,formatMappingDate:()=>N,generateMappingSuggestions:()=>j,getSurveySourceColor:()=>w,groupSpecialtiesBySurvey:()=>y,useMappingData:()=>M,validateMappingConfig:()=>S});var t=s(5043),i=s(2517),r=s(6365),n=s(2153),l=s(5041),c=s(8662),o=s(9248),d=s(2555),p=s(3090),m=s(1591);const u=e=>e.toLowerCase().replace(/[^a-z0-9]+/g," ").trim(),h=(e,a)=>{const s=u(e),t=u(a);if(s===t)return 1;const i=s.split(/\s+/).filter(e=>e.length>2),r=t.split(/\s+/).filter(e=>e.length>2);if(0===i.length||0===r.length)return 0;const n=i.filter(e=>r.includes(e)),l=new Set([...i,...r]);return n.length/l.size},g={SullivanCotter:"#818CF8",MGMA:"#34D399",Gallagher:"#F472B6",ECG:"#FBBF24",AMGA:"#60A5FA",Learned:"#9CA3AF"},x=(e,a)=>e.filter(e=>{if(a.searchTerm){const s=a.searchTerm.toLowerCase();if(!(e.name.toLowerCase().includes(s)||e.surveySource.toLowerCase().includes(s)))return!1}return(!a.surveySource||e.surveySource===a.surveySource)&&!(a.frequency&&e.frequency<a.frequency)}),y=e=>{const a=new Map;return e.forEach(e=>{const s=a.get(e.surveySource)||[];a.set(e.surveySource,[...s,e])}),a},f=(e,a)=>{if(!a)return e;const s=a.toLowerCase();return e.filter(e=>e.standardizedName.toLowerCase().includes(s)||e.sourceSpecialties.some(e=>e.specialty.toLowerCase().includes(s)))},b=(e,a)=>{if(!a)return e;const s=a.toLowerCase(),t={};return Object.entries(e).forEach(e=>{let[a,i]=e;(a.toLowerCase().includes(s)||i.toLowerCase().includes(s))&&(t[a]=i)}),t},j=(e,a,s,t)=>{const i=[],r=new Set,n=new Map;return e.forEach(e=>{const a=u(e.name),s=n.get(a)||[];n.set(a,[...s,e])}),n.forEach((e,n)=>{if(0===e.length)return;let l=n,c=.8;if(t.useExistingMappings){const e=a.find(e=>{const a=u(e.standardizedName);return h(a,n)>.8});e&&(l=e.standardizedName,c=.9)}if(s[n]&&(l=s[n],c=Math.max(c,.85)),t.useFuzzyMatching){const e=a.filter(e=>h(u(e.standardizedName),n)>.7);if(e.length>0){l=e.reduce((e,a)=>{const s=h(u(e.standardizedName),n);return h(u(a.standardizedName),n)>s?a:e}).standardizedName,c=Math.max(c,.75)}}c>=t.confidenceThreshold&&(i.push({standardizedName:l,confidence:c,specialties:e.map(e=>({name:e.name,surveySource:e.surveySource}))}),e.forEach(e=>r.add(e.id)))}),i},v=(e,a)=>{const s=e.length,t=e.filter(e=>e.confidence>=a.confidenceThreshold).length;return{total:s,mapped:t,skipped:s-t,suggestions:e}},S=e=>{const a=[];return(e.confidenceThreshold<0||e.confidenceThreshold>1)&&a.push("Confidence threshold must be between 0 and 1"),"boolean"!==typeof e.useExistingMappings&&a.push("Use existing mappings must be a boolean value"),"boolean"!==typeof e.useFuzzyMatching&&a.push("Use fuzzy matching must be a boolean value"),{isValid:0===a.length,errors:a}},N=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),w=e=>g[e]||"#9CA3AF",A=(e,a)=>{const s=e.length,t=a.length,i=e.reduce((e,a)=>e+a.sourceSpecialties.length,0),r=s>0?i/s:0,n=new Map;a.forEach(e=>{const a=n.get(e.surveySource)||0;n.set(e.surveySource,a+1)});let l="",c=0;return n.forEach((e,a)=>{e>c&&(c=e,l=a)}),{totalMappings:s,totalUnmapped:t,totalSourceSpecialties:i,averageSpecialtiesPerMapping:r,mostCommonSurveySource:l}},M=()=>{const[e,a]=(0,t.useState)([]),[s,i]=(0,t.useState)([]),[r,n]=(0,t.useState)([]),[l,c]=(0,t.useState)({}),[o,u]=(0,t.useState)(!0),[h,g]=(0,t.useState)(null),[N,w]=(0,t.useState)("unmapped"),[A,M]=(0,t.useState)(""),[C,z]=(0,t.useState)(""),k=(0,t.useMemo)(()=>new p.w(new m.s),[]);(0,t.useEffect)(()=>{I()},[]),(0,t.useEffect)(()=>{o||(e.length>0?w("mapped"):s.length>0?w("unmapped"):Object.keys(l).length>0&&w("learned"))},[o,e.length,s.length,l]);const L=e=>(0,d.A)((0,d.A)({},e),{},{sourceSpecialties:e.sourceSpecialties.map(e=>(0,d.A)((0,d.A)({},e),{},{id:e.id||crypto.randomUUID(),surveySource:e.surveySource}))}),E=e=>(0,d.A)((0,d.A)({},e),{},{surveySource:e.surveySource}),F=(0,t.useMemo)(()=>{const e={searchTerm:A},a=s.map(E);return x(a,e)},[s,A]),T=(0,t.useMemo)(()=>y(F),[F]),U=(0,t.useMemo)(()=>{const a=e.map(L);return f(a,C)},[e,C]),D=(0,t.useMemo)(()=>b(l,C),[l,C]),I=(0,t.useCallback)(async()=>{try{u(!0),g(null),console.log("Loading specialty mapping data...");const[e,s,t]=await Promise.all([k.getAllMappings(),k.getUnmappedSpecialties(),k.getLearnedMappings()]);console.log("Loaded data:",{mappings:e.length,unmapped:s.length,learned:Object.keys(t||{}).length}),a(e),i(s),c(t||{})}catch(e){console.error("Error loading data:",e),g("Failed to load specialty data")}finally{u(!1)}},[k]),O=(0,t.useCallback)(e=>{n(a=>a.some(a=>a.id===e.id)?a.filter(a=>a.id!==e.id):[...a,e])},[]),R=(0,t.useCallback)(e=>{n(a=>a.filter(a=>a.id!==e.id))},[]),W=(0,t.useCallback)(()=>{n([])},[]),B=(0,t.useCallback)(async()=>{if(0!==r.length)try{g(null);const e=r[0].name,s=r.map(e=>({id:crypto.randomUUID(),specialty:e.name,originalName:e.name,surveySource:e.surveySource,mappingId:""})),t=await k.createMapping(e,s);a(e=>[...e,t]),i(e=>e.filter(e=>!r.some(a=>a.id===e.id))),n([]),w("mapped")}catch(e){g("Failed to create mapping"),console.error("Error creating mapping:",e)}},[r,k]),H=(0,t.useCallback)(async e=>{try{g(null),await k.deleteMapping(e),a(a=>a.filter(a=>a.id!==e));const s=await k.getUnmappedSpecialties();i(s),w("unmapped")}catch(s){g("Failed to delete mapping"),console.error("Error deleting mapping:",s)}},[k]),_=(0,t.useCallback)(async()=>{try{g(null),await k.clearAllMappings(),a([]),c({}),w("unmapped"),await I()}catch(e){g("Failed to clear all mappings"),console.error("Error clearing mappings:",e)}},[k,I]),P=(0,t.useCallback)(async e=>{try{g(null),await k.removeLearnedMapping(e),c(a=>{const s=(0,d.A)({},a);return delete s[e],s})}catch(a){g("Failed to remove learned mapping"),console.error("Error removing learned mapping:",a)}},[k]),q=(0,t.useCallback)(async a=>{try{g(null);const t=G(a);if(!t.isValid)throw new Error(t.errors.join(", "));const i=s.map(E),r=e.map(L),n=j(i,r,l,a);for(const e of n)e.confidence>=a.confidenceThreshold&&await k.createMapping(e.standardizedName,e.specialties.map(e=>({id:crypto.randomUUID(),specialty:e.name,originalName:e.name,surveySource:e.surveySource,mappingId:""})));const c=v(n,a);return await I(),{suggestions:n,results:c}}catch(t){throw g("Failed to process auto-mapping"),console.error("Auto-mapping error:",t),t}},[s,e,l,k,I]),V=(0,t.useCallback)(()=>{g(null)},[]),G=(0,t.useCallback)(e=>S(e),[]);return{mappings:e.map(L),unmappedSpecialties:s.map(E),selectedSpecialties:r.map(E),learnedMappings:l,loading:o,error:h,activeTab:N,filteredUnmapped:F,specialtiesBySurvey:T,filteredMappings:U,filteredLearned:D,setActiveTab:w,setSelectedSpecialties:n,selectSpecialty:O,deselectSpecialty:R,clearSelectedSpecialties:W,loadData:I,createMapping:B,deleteMapping:H,clearAllMappings:_,removeLearnedMapping:P,autoMap:q,setSearchTerm:M,setMappedSearchTerm:z,clearError:V,validateConfig:G}};var C=s(7784),z=s(1787),k=s(5865),L=s(3845),E=s(3336),F=s(1906),T=s(7449),U=s(9399),D=s(579);const I=e=>{let{specialty:a,isSelected:s,onSelect:t}=e;return(0,D.jsxs)("button",{onClick:()=>{t(a)},className:"w-full p-2 mb-1.5 text-left rounded-lg transition-all text-sm ".concat(s?"bg-indigo-100 border-2 border-indigo-500":"bg-white hover:bg-gray-50 border border-gray-200"),children:[(0,D.jsx)("div",{className:"font-medium text-sm",children:a.name}),(0,D.jsxs)("div",{className:"text-xs text-gray-500",children:["Frequency: ",a.frequency]})]})},O=e=>{let{unmappedSpecialties:a,selectedSpecialties:s,searchTerm:t,onSearchChange:i,onSpecialtySelect:r,onRefresh:n}=e;const c=new Map;return a.forEach(e=>{const a=c.get(e.surveySource)||[];c.set(e.surveySource,[...a,e])}),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"mb-4",children:(0,D.jsx)(C.A,{fullWidth:!0,placeholder:"Search across all surveys...",value:t,onChange:e=>i(e.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"0.875rem",height:"40px"}},InputProps:{startAdornment:(0,D.jsx)(z.A,{position:"start",children:(0,D.jsx)(T.A,{className:"h-4 w-4 text-gray-400"})})}})}),s.length>0&&(0,D.jsxs)("div",{className:"mb-4",children:[(0,D.jsx)(k.A,{variant:"subtitle2",className:"mb-2 text-sm",children:"Selected Specialties:"}),(0,D.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,D.jsx)(L.A,{label:"".concat(e.name," (").concat(e.surveySource,")"),onDelete:()=>r(e),color:"primary",size:"small",sx:{fontSize:"0.75rem"}},e.id))})]}),(0,D.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from(c.entries()).map(e=>{let[a,t]=e;const i=w(a);return(0,D.jsxs)(E.A,{className:"p-3 relative overflow-hidden",children:[(0,D.jsxs)(k.A,{variant:"h6",className:"mb-3 flex items-center justify-between text-sm font-medium",children:[(0,D.jsx)("span",{style:{color:i},children:a}),(0,D.jsxs)(k.A,{variant:"caption",color:"textSecondary",className:"text-xs",children:[t.length," specialties"]})]}),(0,D.jsx)("div",{className:"space-y-1.5",children:t.map(e=>(0,D.jsx)(I,{specialty:e,isSelected:s.some(a=>a.id===e.id),onSelect:r},e.id))}),(0,D.jsx)("div",{className:"absolute bottom-0 inset-x-0 h-1",style:{backgroundColor:i}})]},a)})}),0===Array.from(c.entries()).length&&(0,D.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,D.jsx)(U.A,{className:"h-8 w-8 text-gray-400 mx-auto mb-3"}),(0,D.jsx)(k.A,{variant:"h6",color:"textSecondary",className:"mb-2 text-sm",children:"No Unmapped Specialties Found"}),(0,D.jsx)(k.A,{variant:"body2",color:"textSecondary",className:"mb-3 text-sm",children:t?"No specialties match your search criteria":"All specialties have been mapped or no survey data is available"}),!t&&(0,D.jsx)(F.A,{variant:"outlined",onClick:n,startIcon:(0,D.jsx)(l.A,{className:"h-4 w-4"}),size:"small",sx:{fontSize:"0.875rem",textTransform:"none"},children:"Refresh Data"})]})]})};var R=s(7739),W=s(7392),B=s(2811);const H=e=>{let{mapping:a,onEdit:s,onDelete:t}=e;return(0,D.jsxs)(E.A,{className:"p-3 relative bg-gray-50 hover:bg-gray-100 transition-colors duration-200 border border-gray-200 hover:border-gray-300 hover:shadow-md",children:[(0,D.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(k.A,{variant:"subtitle1",className:"font-medium text-gray-900 text-sm",children:a.standardizedName}),(0,D.jsxs)(k.A,{variant:"caption",className:"text-gray-500 text-xs",children:["Last updated: ",N(a.updatedAt)]})]}),(0,D.jsxs)("div",{className:"flex space-x-1",children:[s&&(0,D.jsx)(R.A,{title:"Edit mapping",children:(0,D.jsx)(W.A,{onClick:s,size:"small",children:(0,D.jsx)(B.A,{className:"h-4 w-4 text-gray-500"})})}),t&&(0,D.jsx)(R.A,{title:"Delete mapping",children:(0,D.jsx)(W.A,{onClick:t,size:"small",children:(0,D.jsx)(o.A,{className:"h-4 w-4 text-gray-500"})})})]})]}),(0,D.jsx)("div",{className:"relative mt-2",children:(0,D.jsx)("div",{className:"flex flex-wrap gap-2 ml-6",children:a.sourceSpecialties.map((e,a)=>(0,D.jsxs)("div",{className:"relative",children:[a>0&&(0,D.jsx)("div",{className:"absolute -left-1 top-1/2 h-0.5 w-2 bg-gray-200"}),(0,D.jsx)("div",{className:"p-2 rounded border border-gray-200 min-w-0 bg-white hover:bg-gray-50 transition-colors duration-150 shadow-sm hover:shadow-md",style:{borderLeftColor:w(e.surveySource),borderLeftWidth:"3px"},children:(0,D.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,D.jsx)(k.A,{className:"font-medium text-sm truncate",children:e.specialty}),(0,D.jsx)(k.A,{variant:"caption",style:{color:w(e.surveySource)},className:"text-xs font-medium whitespace-nowrap",children:e.surveySource})]})})]},e.id))})})]})},_=e=>{let{mappings:a,searchTerm:s,onSearchChange:t,onDeleteMapping:i,onEditMapping:r}=e;return(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("div",{className:"mb-4",children:(0,D.jsx)(C.A,{fullWidth:!0,placeholder:"Search mapped specialties...",value:s,onChange:e=>t(e.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"0.875rem",height:"40px"}},InputProps:{startAdornment:(0,D.jsx)(z.A,{position:"start",children:(0,D.jsx)(T.A,{className:"h-4 w-4 text-gray-400"})})}})}),(0,D.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,D.jsx)(H,{mapping:e,onDelete:()=>i(e.id),onEdit:r?()=>r(e):void 0},e.id))}),0===a.length&&(0,D.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:(0,D.jsx)(k.A,{variant:"body2",color:"textSecondary",className:"text-sm",children:s?"No mapped specialties match your search":"No mapped specialties yet"})})]})},P=e=>{let{learnedMappings:a,searchTerm:s,onSearchChange:t,onRemoveMapping:i}=e;const r=Object.entries(a).filter(e=>{let[a,t]=e;return!s||a.toLowerCase().includes(s.toLowerCase())||t.toLowerCase().includes(s.toLowerCase())}).map(e=>{let[a,s]=e;return{id:a,standardizedName:s,sourceSpecialties:[{id:crypto.randomUUID(),specialty:a,originalName:a,surveySource:"Custom",mappingId:a}],createdAt:new Date,updatedAt:new Date}});return(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("div",{className:"mb-4",children:(0,D.jsx)(C.A,{fullWidth:!0,placeholder:"Search learned mappings...",value:s,onChange:e=>t(e.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"0.875rem",height:"40px"}},InputProps:{startAdornment:(0,D.jsx)(z.A,{position:"start",children:(0,D.jsx)(T.A,{className:"h-4 w-4 text-gray-400"})})}})}),(0,D.jsxs)("div",{className:"space-y-4",children:[r.map(e=>(0,D.jsx)(H,{mapping:e,onDelete:()=>i(e.id)},e.id)),0===Object.keys(a).length&&(0,D.jsx)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:(0,D.jsx)(k.A,{variant:"body1",className:"text-gray-500",children:"No learned mappings yet"})})]})]})};var q=s(35),V=s(6600),G=s(5316),Y=s(9336),J=s(6446),K=s(4931),Q=s(707),X=s(4598),Z=s(2664),$=s(9347),ee=s(1637);const ae=e=>{let{isOpen:a,onClose:s,onAutoMap:i,loading:r=!1}=e;const[n,c]=(0,t.useState)(.8),[o,d]=(0,t.useState)(!0),[p,m]=(0,t.useState)(!0),[u,h]=(0,t.useState)(null),g=()=>{h(null),s()};return(0,D.jsxs)(q.A,{open:a,onClose:g,maxWidth:"md",fullWidth:!0,children:[(0,D.jsx)(V.A,{children:(0,D.jsxs)("div",{className:"flex items-center gap-2",children:[(0,D.jsx)(l.A,{className:"h-6 w-6 text-yellow-500"}),(0,D.jsx)("span",{children:"Auto-Map Specialties"})]})}),(0,D.jsxs)(G.A,{children:[(0,D.jsx)(k.A,{color:"textSecondary",className:"mb-4",children:"Automatically map specialties based on similarity and existing mappings."}),(0,D.jsx)(Y.A,{className:"mb-6"}),(0,D.jsxs)("div",{className:"space-y-6 mb-8",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(k.A,{variant:"subtitle1",className:"mb-2 font-medium",children:"Confidence Threshold"}),(0,D.jsx)(k.A,{variant:"body2",color:"textSecondary",className:"mb-3",children:"Only create mappings with confidence above this threshold"}),(0,D.jsx)(J.A,{className:"px-2",children:(0,D.jsx)(K.Ay,{value:n,onChange:(e,a)=>c(a),min:.1,max:1,step:.1,marks:[{value:.1,label:"0.1"},{value:.5,label:"0.5"},{value:1,label:"1.0"}],valueLabelDisplay:"auto",valueLabelFormat:e=>"".concat((100*e).toFixed(0),"%")})}),(0,D.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,D.jsx)("span",{children:"Low (More mappings, less accurate)"}),(0,D.jsx)("span",{children:"High (Fewer mappings, more accurate)"})]})]}),(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)(k.A,{variant:"subtitle1",className:"font-medium",children:"Mapping Options"}),(0,D.jsx)(Q.A,{control:(0,D.jsx)(X.A,{checked:o,onChange:e=>d(e.target.checked)}),label:"Use existing mappings as reference"}),(0,D.jsx)(Q.A,{control:(0,D.jsx)(X.A,{checked:p,onChange:e=>m(e.target.checked)}),label:"Enable fuzzy matching for similar names"})]}),(0,D.jsxs)(E.A,{className:"p-4 bg-gray-50",children:[(0,D.jsx)(k.A,{variant:"subtitle2",className:"mb-2 font-medium",children:"Current Settings"}),(0,D.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,D.jsx)(L.A,{label:"Confidence: ".concat((100*n).toFixed(0),"%"),size:"small",color:"primary"}),(0,D.jsx)(L.A,{label:o?"Use existing mappings":"Ignore existing mappings",size:"small",variant:"outlined"}),(0,D.jsx)(L.A,{label:p?"Fuzzy matching enabled":"Fuzzy matching disabled",size:"small",variant:"outlined"})]})]})]}),u&&(0,D.jsx)(Z.A,{severity:"error",className:"mb-4",children:u})]}),(0,D.jsxs)($.A,{className:"p-4",children:[(0,D.jsx)(F.A,{onClick:g,disabled:r,children:"Cancel"}),(0,D.jsx)(F.A,{onClick:async()=>{try{h(null);const e={confidenceThreshold:n,useExistingMappings:o,useFuzzyMatching:p};await i(e),s()}catch(e){h("Failed to process auto-mapping"),console.error("Auto-mapping error:",e)}},variant:"contained",startIcon:r?(0,D.jsx)(ee.A,{size:16}):(0,D.jsx)(l.A,{className:"h-4 w-4"}),disabled:r,children:r?"Processing...":"Auto-Map Specialties"})]})]})};var se=s(4614);const te=e=>{let{onMappingChange:a,onUnmappedChange:s}=e;const[d,p]=(0,t.useState)(!1),[m,u]=(0,t.useState)(!1),[h,g]=(0,t.useState)(!1),{mappings:x,unmappedSpecialties:y,selectedSpecialties:f,learnedMappings:b,loading:j,error:v,activeTab:S,filteredUnmapped:N,filteredMappings:w,filteredLearned:A,setActiveTab:C,selectSpecialty:z,clearSelectedSpecialties:k,loadData:L,createMapping:E,deleteMapping:F,clearAllMappings:T,removeLearnedMapping:U,autoMap:I,setSearchTerm:R,setMappedSearchTerm:W,clearError:B}=M();return(0,t.useEffect)(()=>{null===a||void 0===a||a(x)},[x,a]),(0,t.useEffect)(()=>{null===s||void 0===s||s(y)},[y,s]),j?(0,D.jsx)(se.Ay,{message:"Loading specialty mappings...",fullScreen:!0,size:"lg"}):(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("div",{className:"w-full min-h-screen",children:(0,D.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,D.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsxs)("div",{className:"flex items-center gap-2",children:[(0,D.jsx)("button",{onClick:()=>g(!h),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors duration-200","aria-label":h?"Collapse help section":"Expand help section",children:h?(0,D.jsx)(i.A,{className:"h-5 w-5 text-gray-500"}):(0,D.jsx)(r.A,{className:"h-5 w-5 text-gray-500"})}),(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Specialty Mapping Help"})]}),(0,D.jsx)("div",{className:"flex items-center gap-2",children:(0,D.jsx)(n.A,{className:"h-5 w-5 text-indigo-600"})})]}),h&&(0,D.jsx)("div",{className:"space-y-4",children:(0,D.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[(0,D.jsx)("h4",{className:"font-semibold text-indigo-900 mb-2",children:"How Specialty Mapping Works"}),(0,D.jsxs)("ul",{className:"text-sm text-indigo-800 space-y-1",children:[(0,D.jsx)("li",{children:"\u2022 Map specialty names from different surveys to standardized names"}),(0,D.jsx)("li",{children:"\u2022 Use auto-mapping for bulk processing with configurable confidence levels"}),(0,D.jsx)("li",{children:'\u2022 Review and edit mappings in the "Mapped Specialties" tab'}),(0,D.jsx)("li",{children:"\u2022 Learned mappings are automatically created based on your patterns"})]})]})})]}),(0,D.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Specialty Mapping"}),(0,D.jsxs)("div",{className:"flex space-x-2",children:["learned"!==S&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("button",{onClick:()=>p(!0),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200",children:[(0,D.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Auto-Map Specialties"]}),(0,D.jsxs)("button",{onClick:E,disabled:0===f.length,className:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-lg text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,D.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Create Mapping"]})]}),"mapped"===S&&(0,D.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to clear all mappings? This cannot be undone.")&&T()},className:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-lg text-red-600 hover:text-red-700 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200",children:[(0,D.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Clear All"]})]})]}),v&&(0,D.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,D.jsxs)("div",{className:"flex",children:[(0,D.jsx)("div",{className:"flex-shrink-0",children:(0,D.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,D.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,D.jsx)("div",{className:"ml-3",children:(0,D.jsx)("p",{className:"text-sm text-red-800",children:v})})]})}),(0,D.jsx)("div",{className:"border-b border-gray-200 mb-4",children:(0,D.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{key:"unmapped",label:"Unmapped Specialties"},{key:"mapped",label:"Mapped Specialties"},{key:"learned",label:"Learned Mappings"}].map(e=>(0,D.jsx)("button",{onClick:()=>C(e.key),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ".concat(S===e.key?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.label},e.key))})}),(0,D.jsxs)("div",{className:"min-h-[400px]",children:["unmapped"===S&&(0,D.jsx)(O,{unmappedSpecialties:N,selectedSpecialties:f,searchTerm:"",onSearchChange:R,onSpecialtySelect:z,onRefresh:L}),"mapped"===S&&(0,D.jsx)(_,{mappings:w,searchTerm:"",onSearchChange:W,onDeleteMapping:F}),"learned"===S&&(0,D.jsx)(P,{learnedMappings:A,searchTerm:"",onSearchChange:W,onRemoveMapping:e=>{window.confirm("Remove this learned mapping?")&&U(e)}})]})]}),(0,D.jsx)(ae,{isOpen:d,onClose:()=>p(!1),onAutoMap:async e=>{u(!0);try{await I(e),C("mapped")}finally{u(!1)}},loading:m})]})})})},ie=e=>{let{isOpen:a,onToggle:s}=e;return(0,D.jsxs)("div",{className:"mb-6",children:[(0,D.jsxs)("button",{onClick:s,className:"w-full flex items-center justify-between px-4 py-2 bg-indigo-50 hover:bg-indigo-100 border border-indigo-200 rounded font-medium mb-2",children:[(0,D.jsxs)("span",{className:"flex items-center gap-2",children:[(0,D.jsx)(n.A,{className:"h-5 w-5 text-indigo-600"}),(0,D.jsx)("span",{children:"Specialty Mapping Help"})]}),(0,D.jsx)(i.A,{className:"h-5 w-5 text-indigo-600 transition-transform duration-200 ".concat(a?"rotate-180":"")})]}),a&&(0,D.jsxs)("div",{className:"p-4 bg-white border border-indigo-100 rounded shadow text-sm space-y-3",children:[(0,D.jsx)("h3",{className:"font-bold text-indigo-700 mb-1",children:"How Auto-Mapping Works"}),(0,D.jsxs)("ul",{className:"list-disc pl-5 mb-2",children:[(0,D.jsx)("li",{children:"The app uses smart matching (including fuzzy logic and learned mappings) to suggest standardized specialties for each survey's specialty names."}),(0,D.jsx)("li",{children:"Auto-mapping considers spelling, abbreviations, and previous user corrections to improve accuracy."}),(0,D.jsx)("li",{children:"You can adjust the confidence threshold and enable/disable fuzzy matching in the Auto-Map dialog."})]}),(0,D.jsx)("h3",{className:"font-bold text-indigo-700 mb-1",children:"How to Review and Fix Mappings"}),(0,D.jsxs)("ul",{className:"list-disc pl-5 mb-2",children:[(0,D.jsx)("li",{children:'After auto-mapping, review the suggested mappings in the "Mapped" tab.'}),(0,D.jsx)("li",{children:'If a specialty is mapped incorrectly, you can delete the mapping and manually remap it by selecting the correct specialties and clicking "Create Mapping."'}),(0,D.jsx)("li",{children:"Use the search bar to quickly find and review specific specialties."}),(0,D.jsx)("li",{children:"Clearing all mappings will reset the process and allow you to start over."})]}),(0,D.jsx)("h3",{className:"font-bold text-indigo-700 mb-1",children:"Best Practices"}),(0,D.jsxs)("ul",{className:"list-disc pl-5",children:[(0,D.jsx)("li",{children:"Always review auto-mapped results for accuracy, especially for uncommon or ambiguous specialty names."}),(0,D.jsx)("li",{children:"Use consistent naming conventions in your source data for best results."}),(0,D.jsx)("li",{children:"Contact support if you encounter persistent mapping issues."})]})]})]})}},4614:(e,a,s)=>{s.d(a,{Ay:()=>l,az:()=>n});s(5043);var t=s(8557),i=s(579);const r=e=>{let{message:a="Loading...",size:s="md",variant:r="primary",fullScreen:n=!1,overlay:l=!1,className:c}=e;const o={xs:"w-4 h-4",sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[s],d={default:"text-gray-600",primary:"text-indigo-600",secondary:"text-gray-500",success:"text-emerald-600",warning:"text-amber-600",error:"text-red-600"}[r],p=()=>(0,i.jsxs)("svg",{className:(0,t.cn)("animate-spin",o,d,"inline-block"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m=(0,i.jsxs)("div",{className:(0,t.cn)("flex flex-col items-center justify-center gap-3",n?"min-h-screen":"min-h-[200px]",c),children:[(0,i.jsx)(p,{}),a&&(0,i.jsx)("p",{className:(0,t.cn)("text-sm font-medium text-center","default"===r?"text-gray-600":"text-gray-700"),children:a})]});return l?(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-white/90 backdrop-blur-sm z-50",children:m}):m},n=e=>{let{size:a="md"}=e;return(0,i.jsxs)("svg",{className:(0,t.cn)("animate-spin text-current",{sm:"w-4 h-4",md:"w-5 h-5"}[a]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},l=r}}]);
//# sourceMappingURL=133.5be15c4f.chunk.js.map